## 계층형 아키텍처의 문제는 무엇일까?

웹 -> 도메인(서비스 + 비즈니스 로직) -> 영속성(엔티티 <- 리포지토리)  // 계층형 아키텍처.

***근데 이런 구조는 한번도 안 만들어봄..***

* 계층형 아키텍처는 데이터베이스 주도 설계를 유도한다.

계층형 아키텍처는 영속성 계층을 토대로 웹과 도메인이 만들어진다. 도메인은 비즈니스 요구사항에 따라 만들어져야지 데이터베이스를 토대로 만들면 안 된다.

비즈니스 요구사항에 따른 도메인을 먼저 만들자!

* 지름길을 택하기 쉬워진다

상위 계층에 위치한 컴포넌트에 접근해야 하는 경우 상위 계층을 하위 계층으로 내려서 사용해버린다 (어플리케이션 응집성이 떨어짐)

* 테스트하기 어려워진다 (계층을 건너뛰는 경우).

웹 계층에서 도메인(서비스) 를 건너 뛰고 엔티티에 바로 접근하는 경우 도메인 로직을 웹 계층에 구현할 수 있고 테스트 코드 작성시

영속성 계층을 모킹해서 주입받아야하기 때문에 테스트의 복잡성이 올라간다.

* 유스케이스를 숨긴다

기능이 추가되거나 변경된다면 적절한 위치에 맞게 변경해야 한다 하지만 계층형 아키텍처를 사용하면 도메인 로직이 여러 계층에

걸쳐 흩어지기가 쉽다. 유스케이스가 간단해서 도메인 계층을 생략해버리면 웹 계층이나 영속성 계층에 도메인 로직이 흩어질 수 있다.

* 동시 작업이 어려워진다

계층형 아키텍처는 영속성 계층을 토대로 탑이 쌓이기 때문에 웹과 도메인이 동시에 작업할 수 없다.

* 
